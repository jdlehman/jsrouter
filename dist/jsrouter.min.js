!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.jsrouter=t():e.jsrouter=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){var t=p.pathFromHash(e.oldURL),n=p.pathFromHash(e.newURL),r={path:t,nextPath:n},a={lastPath:t,path:n},i=p.getHandlers(this.handlers,this.recognizer,r,"leave"),o=p.getHandlers(this.handlers,this.recognizer,a,"enter"),s=p.getFlattenedHandlerArgs(i,r),h=p.getFlattenedHandlerArgs(o,a);this.handleBeforeChange(s),i&&p.callHandlers(i),o?p.callHandlers(o):this.unrecognizedRouteHandler(t,n),this.handleAfterChange(h)}function o(e){var t=p.pathFromHash(e.target.URL),n=p.getHandlers(this.handlers,this.recognizer,{path:t},"enter");n&&p.callHandlers(n);var r=p.getFlattenedHandlerArgs(n,{path:t});this.handleLoad(e,r)}function s(e){var t=this.currentPath(),n=p.getHandlers(this.handlers,this.recognizer,{path:t}),r=p.getFlattenedHandlerArgs(n,{path:t});this.handlePopState(e,r)}function h(){window.addEventListener("load",o.bind(this)),window.addEventListener("popstate",s.bind(this)),window.addEventListener("hashchange",i.bind(this))}Object.defineProperty(t,"__esModule",{value:!0});var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(3),d=r(l),f=n(1),p=n(2),g=function(){function e(t){a(this,e);var n={unrecognizedRouteHandler:f.defaultUnrecognizedRouteHandler.bind(this),handleLoad:p.noop,handlePopState:p.noop,navigateState:f.defaultNavigateState,handleBeforeChange:p.noop,handleAfterChange:p.noop,persistState:function(){var e;return(e=window.history).replaceState.apply(e,arguments)}},r=u({},n,t),i=r.unrecognizedRouteHandler,o=r.handleLoad,s=r.handlePopState,c=r.navigateState,l=r.handleBeforeChange,g=r.handleAfterChange,v=r.persistState;this.recognizer=new d["default"],this.handlers={},this.unrecognizedRouteHandler=i,this.handleLoad=o,this.handlePopState=s,this.navigateState=c,this.handleBeforeChange=l,this.handleAfterChange=g,this.persistState=v,h.call(this)}return c(e,[{key:"addHandler",value:function(e,t){this.handlers[e]=t}},{key:"map",value:function(e){this.recognizer.map(e)}},{key:"currentPath",value:function(){return p.pathFromHash(window.location.hash.split("?")[0])}},{key:"navigate",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.navigateState():arguments[1],n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],r=void 0,a=window.location.hash;r=p.hasLeadingSlash(e)?"#"+e:"#"+this.currentPath()+e,window.location.hash=r,this.persistState(t,"",r),n.trigger&&a===r&&i.call(this,{type:"hashchange",oldURL:r,newURL:r})}},{key:"back",value:function(){window.history.back()}},{key:"forward",value:function(){window.history.forward()}},{key:"pop",value:function(){var e=this.currentPath().match(/(.+)(?:\/.+\/?)/);e&&this.navigate(e[1]+"/")}}]),e}();t["default"]=g},function(e,t){"use strict";function n(e,t){this.navigate("/")}function r(){return{}}Object.defineProperty(t,"__esModule",{value:!0}),t.defaultUnrecognizedRouteHandler=n,t.defaultNavigateState=r},function(e,t){"use strict";function n(e){return"/"===e.charAt(0)}function r(e){return n(e)?e:"/"+e}function a(e){return"/"!==e.slice(-1)?e+"/":e}function i(e){return a(r(e.split("#")[1]||"/"))}function o(){}function s(e){return e.split("?")[0]}function h(e,t){var n={};return Object.keys(e).forEach(function(t){n[t]=s(e[t])}),n}function u(e,t,n,r){var a=t.recognize(n.path);if(!a)return null;for(var i=[],o=d({},h(n),{queryParams:a.queryParams}),s=0;s<a.length;s++){var u=a[s],c=u.params,l=e[u.handler],f=l&&l[r],p=d({},o,{params:c});i.push({handler:f,args:p})}return i}function c(e){e.forEach(function(e){var t=e.handler,n=e.args;"function"==typeof t&&t(n)})}function l(e,t){if(!e)return t;var n=e[0].args,r=e.reduce(function(e,t){var n=t.args.params;return d({},e,n)},{});return d({},n,{params:r})}Object.defineProperty(t,"__esModule",{value:!0});var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.hasLeadingSlash=n,t.ensureLeadingSlash=r,t.ensureTrailingSlash=a,t.pathFromHash=i,t.noop=o,t.getHandlers=u,t.callHandlers=c,t.getFlattenedHandlerArgs=l},function(e,t,n){var r;(function(e){(function(){"use strict";function a(e,t,n){this.path=e,this.matcher=t,this.delegate=n}function i(e){this.routes={},this.children={},this.target=e}function o(e,t,n){return function(r,i){var s=e+r;return i?void i(o(s,t,n)):new a(e+r,t,n)}}function s(e,t,n){for(var r=0,a=0,i=e.length;i>a;a++)r+=e[a].path.length;t=t.substr(r);var o={path:t,handler:n};e.push(o)}function h(e,t,n,r){var a=t.routes;for(var i in a)if(a.hasOwnProperty(i)){var o=e.slice();s(o,i,a[i]),t.children[i]?h(o,t.children[i],n,r):n.call(r,o)}}function u(e){return"[object Array]"===Object.prototype.toString.call(e)}function c(e){this.string=e}function l(e){this.name=e}function d(e){this.name=e}function f(){}function p(e,t,n){"/"===e.charAt(0)&&(e=e.substr(1));var r=e.split("/"),a=[];n.val="";for(var i=0,o=r.length;o>i;i++){var s,h=r[i];(s=h.match(/^:([^\/]+)$/))?(a.push(new l(s[1])),t.push(s[1]),n.val+="3"):(s=h.match(/^\*([^\/]+)$/))?(a.push(new d(s[1])),n.val+="2",t.push(s[1])):""===h?(a.push(new f),n.val+="1"):(a.push(new c(h)),n.val+="4")}return n.val=+n.val,a}function g(e){this.charSpec=e,this.nextStates=[]}function v(e){return e.sort(function(e,t){return t.specificity.val-e.specificity.val})}function m(e,t){for(var n=[],r=0,a=e.length;a>r;r++){var i=e[r];n=n.concat(i.match(t))}return n}function y(e){this.queryParams=e||{}}function w(e,t,n){for(var r=e.handlers,a=e.regex,i=t.match(a),o=1,s=new y(n),h=0,u=r.length;u>h;h++){for(var c=r[h],l=c.names,d={},f=0,p=l.length;p>f;f++)d[l[f]]=i[o++];s.push({handler:c.handler,params:d,isDynamic:!!l.length})}return s}function S(e,t){return t.eachChar(function(t){e=e.put(t)}),e}function x(e){return e=e.replace(/\+/gm,"%20"),decodeURIComponent(e)}a.prototype={to:function(e,t){var n=this.delegate;if(n&&n.willAddRoute&&(e=n.willAddRoute(this.matcher.target,e)),this.matcher.add(this.path,e),t){if(0===t.length)throw new Error("You must have an argument in the function passed to `to`");this.matcher.addChild(this.path,e,t,this.delegate)}return this}},i.prototype={add:function(e,t){this.routes[e]=t},addChild:function(e,t,n,r){var a=new i(t);this.children[e]=a;var s=o(e,a,r);r&&r.contextEntered&&r.contextEntered(t,s),n(s)}};var b=function(e,t){var n=new i;e(o("",n,this.delegate)),h([],n,function(e){t?t(this,e):this.add(e)},this)},C=["/",".","*","+","?","|","(",")","[","]","{","}","\\"],H=new RegExp("(\\"+C.join("|\\")+")","g");c.prototype={eachChar:function(e){for(var t,n=this.string,r=0,a=n.length;a>r;r++)t=n.charAt(r),e({validChars:t})},regex:function(){return this.string.replace(H,"\\$1")},generate:function(){return this.string}},l.prototype={eachChar:function(e){e({invalidChars:"/",repeat:!0})},regex:function(){return"([^/]+)"},generate:function(e){return e[this.name]}},d.prototype={eachChar:function(e){e({invalidChars:"",repeat:!0})},regex:function(){return"(.+)"},generate:function(e){return e[this.name]}},f.prototype={eachChar:function(){},regex:function(){return""},generate:function(){return""}},g.prototype={get:function(e){for(var t=this.nextStates,n=0,r=t.length;r>n;n++){var a=t[n],i=a.charSpec.validChars===e.validChars;if(i=i&&a.charSpec.invalidChars===e.invalidChars)return a}},put:function(e){var t;return(t=this.get(e))?t:(t=new g(e),this.nextStates.push(t),e.repeat&&t.nextStates.push(t),t)},match:function(e){for(var t,n,r,a=this.nextStates,i=[],o=0,s=a.length;s>o;o++)t=a[o],n=t.charSpec,"undefined"!=typeof(r=n.validChars)?-1!==r.indexOf(e)&&i.push(t):"undefined"!=typeof(r=n.invalidChars)&&-1===r.indexOf(e)&&i.push(t);return i}};var P=Object.create||function(e){function t(){}return t.prototype=e,new t};y.prototype=P({splice:Array.prototype.splice,slice:Array.prototype.slice,push:Array.prototype.push,length:0,queryParams:null});var R=function(){this.rootState=new g,this.names={}};R.prototype={add:function(e,t){for(var n,r=this.rootState,a="^",i={},o=[],s=[],h=!0,u=0,c=e.length;c>u;u++){var l=e[u],d=[],g=p(l.path,d,i);s=s.concat(g);for(var v=0,m=g.length;m>v;v++){var y=g[v];y instanceof f||(h=!1,r=r.put({validChars:"/"}),a+="/",r=S(r,y),a+=y.regex())}var w={handler:l.handler,names:d};o.push(w)}h&&(r=r.put({validChars:"/"}),a+="/"),r.handlers=o,r.regex=new RegExp(a+"$"),r.specificity=i,(n=t&&t.as)&&(this.names[n]={segments:s,handlers:o})},handlersFor:function(e){var t=this.names[e],n=[];if(!t)throw new Error("There is no route named "+e);for(var r=0,a=t.handlers.length;a>r;r++)n.push(t.handlers[r]);return n},hasRoute:function(e){return!!this.names[e]},generate:function(e,t){var n=this.names[e],r="";if(!n)throw new Error("There is no route named "+e);for(var a=n.segments,i=0,o=a.length;o>i;i++){var s=a[i];s instanceof f||(r+="/",r+=s.generate(t))}return"/"!==r.charAt(0)&&(r="/"+r),t&&t.queryParams&&(r+=this.generateQueryString(t.queryParams,n.handlers)),r},generateQueryString:function(e,t){var n=[],r=[];for(var a in e)e.hasOwnProperty(a)&&r.push(a);r.sort();for(var i=0,o=r.length;o>i;i++){a=r[i];var s=e[a];if(null!=s){var h=encodeURIComponent(a);if(u(s))for(var c=0,l=s.length;l>c;c++){var d=a+"[]="+encodeURIComponent(s[c]);n.push(d)}else h+="="+encodeURIComponent(s),n.push(h)}}return 0===n.length?"":"?"+n.join("&")},parseQueryString:function(e){for(var t=e.split("&"),n={},r=0;r<t.length;r++){var a,i=t[r].split("="),o=x(i[0]),s=o.length,h=!1;1===i.length?a="true":(s>2&&"[]"===o.slice(s-2)&&(h=!0,o=o.slice(0,s-2),n[o]||(n[o]=[])),a=i[1]?x(i[1]):""),h?n[o].push(a):n[o]=a}return n},recognize:function(e){var t,n,r,a,i=[this.rootState],o={},s=!1;if(a=e.indexOf("?"),-1!==a){var h=e.substr(a+1,e.length);e=e.substr(0,a),o=this.parseQueryString(h)}for(e=decodeURI(e),"/"!==e.charAt(0)&&(e="/"+e),t=e.length,t>1&&"/"===e.charAt(t-1)&&(e=e.substr(0,t-1),s=!0),n=0,r=e.length;r>n&&(i=m(i,e.charAt(n)),i.length);n++);var u=[];for(n=0,r=i.length;r>n;n++)i[n].handlers&&u.push(i[n]);i=v(u);var c=u[0];return c&&c.handlers?(s&&"(.+)$"===c.regex.source.slice(-5)&&(e+="/"),w(c,e,o)):void 0}},R.prototype.map=b,R.VERSION="0.1.9";var A=R;n(4).amd?(r=function(){return A}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))):"undefined"!=typeof e&&e.exports?e.exports=A:"undefined"!=typeof this&&(this.RouteRecognizer=A)}).call(this)}).call(t,n(5)(e))},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}}])});