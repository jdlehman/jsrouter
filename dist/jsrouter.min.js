!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.jsrouter=t():e.jsrouter=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=n(3),s=r(h),u=n(2),c=n(1),l=function(){function e(t){var n=t.unrecognizedRouteHandler,r=void 0===n?u.defaultUnrecognizedRouteHandler:n,o=t.handleLoad,h=void 0===o?i:o,c=t.handlePopState,l=void 0===c?i:c,d=t.navigateState,f=void 0===d?u.defaultNavigateState:d,p=t.handleRouteBeforeChange,g=void 0===p?i:p,v=t.handleRouteAfterChange,y=void 0===v?i:v;a(this,e),this.recognizer=new s["default"],this.handlers={},this.unrecognizedRouteHandler=r.bind(this),this.handleLoad=h.bind(this),this.handleRouteChange=handleRouteChange.bind(this),this.handlePopState=l.bind(this),this.navigateState=f.bind(this),this.handleRouteBeforeChange=g.bind(this),this.handleRouteAfterChange=y.bind(this),this.start()}return o(e,[{key:"start",value:function(){window.addEventListener("load",this.handleLoad),window.addEventListener("popstate",this.handlePopState),window.addEventListener("hashchange",this.handleRouteChange)}},{key:"addHandler",value:function(e,t){this.handlers[e]=t}},{key:"map",value:function(e){this.recognizer.map(e)}},{key:"currentPath",value:function(){return c.pathFromURL(window.location.hash.split("?")[0])}},{key:"navigate",value:function(e){var t,n=arguments.length<=1||void 0===arguments[1]?this.navigateState():arguments[1],r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],a=window.location.hash;t=c.hasLeadingSlash(e)?"#"+e:"#"+this.currentPath()+e,window.location.hash=t,window.history.replaceState(n,"",t),r.trigger&&a===t&&this.handleRouteChange({type:"hashchange",oldURL:t,newURL:t})}},{key:"back",value:function(){window.history.back()}},{key:"forward",value:function(){window.history.forward()}},{key:"handleRouteChange",value:function(e){var t=c.pathFromURL(e.oldURL),n=c.pathFromURL(e.newURL);this.handleRouteBeforeChange(t,n),recognizeAndCallHandler.call(this,t,n,"leave"),recognizeAndCallHandler.call(this,n,t,"enter"),this.handleRouteAfterChange(t,n)}}]),e}();t["default"]=l,e.exports=t["default"]},function(e,t){"use strict";function n(e){return"/"===e.charAt(0)}function r(e){return n(e)?e:"/"+e}function a(e){return"/"!==e.slice(-1)?e+"/":e}function i(e){return a(r(e.split("#")[1]||"/"))}Object.defineProperty(t,"__esModule",{value:!0}),t.hasLeadingSlash=n,t.ensureLeadingSlash=r,t.ensureTrailingSlash=a,t.pathFromURL=i},function(e,t,n){"use strict";function r(e,t,n){this.navigate("/")}function a(){return{}}Object.defineProperty(t,"__esModule",{value:!0}),t.defaultUnrecognizedRouteHandler=r,t.defaultNavigateState=a;n(1)},function(e,t,n){var r;(function(e){(function(){"use strict";function a(e,t,n){this.path=e,this.matcher=t,this.delegate=n}function i(e){this.routes={},this.children={},this.target=e}function o(e,t,n){return function(r,i){var h=e+r;return i?void i(o(h,t,n)):new a(e+r,t,n)}}function h(e,t,n){for(var r=0,a=0,i=e.length;i>a;a++)r+=e[a].path.length;t=t.substr(r);var o={path:t,handler:n};e.push(o)}function s(e,t,n,r){var a=t.routes;for(var i in a)if(a.hasOwnProperty(i)){var o=e.slice();h(o,i,a[i]),t.children[i]?s(o,t.children[i],n,r):n.call(r,o)}}function u(e){return"[object Array]"===Object.prototype.toString.call(e)}function c(e){this.string=e}function l(e){this.name=e}function d(e){this.name=e}function f(){}function p(e,t,n){"/"===e.charAt(0)&&(e=e.substr(1));var r=e.split("/"),a=[];n.val="";for(var i=0,o=r.length;o>i;i++){var h,s=r[i];(h=s.match(/^:([^\/]+)$/))?(a.push(new l(h[1])),t.push(h[1]),n.val+="3"):(h=s.match(/^\*([^\/]+)$/))?(a.push(new d(h[1])),n.val+="2",t.push(h[1])):""===s?(a.push(new f),n.val+="1"):(a.push(new c(s)),n.val+="4")}return n.val=+n.val,a}function g(e){this.charSpec=e,this.nextStates=[]}function v(e){return e.sort(function(e,t){return t.specificity.val-e.specificity.val})}function y(e,t){for(var n=[],r=0,a=e.length;a>r;r++){var i=e[r];n=n.concat(i.match(t))}return n}function m(e){this.queryParams=e||{}}function w(e,t,n){for(var r=e.handlers,a=e.regex,i=t.match(a),o=1,h=new m(n),s=0,u=r.length;u>s;s++){for(var c=r[s],l=c.names,d={},f=0,p=l.length;p>f;f++)d[l[f]]=i[o++];h.push({handler:c.handler,params:d,isDynamic:!!l.length})}return h}function C(e,t){return t.eachChar(function(t){e=e.put(t)}),e}function R(e){return e=e.replace(/\+/gm,"%20"),decodeURIComponent(e)}a.prototype={to:function(e,t){var n=this.delegate;if(n&&n.willAddRoute&&(e=n.willAddRoute(this.matcher.target,e)),this.matcher.add(this.path,e),t){if(0===t.length)throw new Error("You must have an argument in the function passed to `to`");this.matcher.addChild(this.path,e,t,this.delegate)}return this}},i.prototype={add:function(e,t){this.routes[e]=t},addChild:function(e,t,n,r){var a=new i(t);this.children[e]=a;var h=o(e,a,r);r&&r.contextEntered&&r.contextEntered(t,h),n(h)}};var x=function(e,t){var n=new i;e(o("",n,this.delegate)),s([],n,function(e){t?t(this,e):this.add(e)},this)},b=["/",".","*","+","?","|","(",")","[","]","{","}","\\"],S=new RegExp("(\\"+b.join("|\\")+")","g");c.prototype={eachChar:function(e){for(var t,n=this.string,r=0,a=n.length;a>r;r++)t=n.charAt(r),e({validChars:t})},regex:function(){return this.string.replace(S,"\\$1")},generate:function(){return this.string}},l.prototype={eachChar:function(e){e({invalidChars:"/",repeat:!0})},regex:function(){return"([^/]+)"},generate:function(e){return e[this.name]}},d.prototype={eachChar:function(e){e({invalidChars:"",repeat:!0})},regex:function(){return"(.+)"},generate:function(e){return e[this.name]}},f.prototype={eachChar:function(){},regex:function(){return""},generate:function(){return""}},g.prototype={get:function(e){for(var t=this.nextStates,n=0,r=t.length;r>n;n++){var a=t[n],i=a.charSpec.validChars===e.validChars;if(i=i&&a.charSpec.invalidChars===e.invalidChars)return a}},put:function(e){var t;return(t=this.get(e))?t:(t=new g(e),this.nextStates.push(t),e.repeat&&t.nextStates.push(t),t)},match:function(e){for(var t,n,r,a=this.nextStates,i=[],o=0,h=a.length;h>o;o++)t=a[o],n=t.charSpec,"undefined"!=typeof(r=n.validChars)?-1!==r.indexOf(e)&&i.push(t):"undefined"!=typeof(r=n.invalidChars)&&-1===r.indexOf(e)&&i.push(t);return i}};var A=Object.create||function(e){function t(){}return t.prototype=e,new t};m.prototype=A({splice:Array.prototype.splice,slice:Array.prototype.slice,push:Array.prototype.push,length:0,queryParams:null});var L=function(){this.rootState=new g,this.names={}};L.prototype={add:function(e,t){for(var n,r=this.rootState,a="^",i={},o=[],h=[],s=!0,u=0,c=e.length;c>u;u++){var l=e[u],d=[],g=p(l.path,d,i);h=h.concat(g);for(var v=0,y=g.length;y>v;v++){var m=g[v];m instanceof f||(s=!1,r=r.put({validChars:"/"}),a+="/",r=C(r,m),a+=m.regex())}var w={handler:l.handler,names:d};o.push(w)}s&&(r=r.put({validChars:"/"}),a+="/"),r.handlers=o,r.regex=new RegExp(a+"$"),r.specificity=i,(n=t&&t.as)&&(this.names[n]={segments:h,handlers:o})},handlersFor:function(e){var t=this.names[e],n=[];if(!t)throw new Error("There is no route named "+e);for(var r=0,a=t.handlers.length;a>r;r++)n.push(t.handlers[r]);return n},hasRoute:function(e){return!!this.names[e]},generate:function(e,t){var n=this.names[e],r="";if(!n)throw new Error("There is no route named "+e);for(var a=n.segments,i=0,o=a.length;o>i;i++){var h=a[i];h instanceof f||(r+="/",r+=h.generate(t))}return"/"!==r.charAt(0)&&(r="/"+r),t&&t.queryParams&&(r+=this.generateQueryString(t.queryParams,n.handlers)),r},generateQueryString:function(e,t){var n=[],r=[];for(var a in e)e.hasOwnProperty(a)&&r.push(a);r.sort();for(var i=0,o=r.length;o>i;i++){a=r[i];var h=e[a];if(null!=h){var s=encodeURIComponent(a);if(u(h))for(var c=0,l=h.length;l>c;c++){var d=a+"[]="+encodeURIComponent(h[c]);n.push(d)}else s+="="+encodeURIComponent(h),n.push(s)}}return 0===n.length?"":"?"+n.join("&")},parseQueryString:function(e){for(var t=e.split("&"),n={},r=0;r<t.length;r++){var a,i=t[r].split("="),o=R(i[0]),h=o.length,s=!1;1===i.length?a="true":(h>2&&"[]"===o.slice(h-2)&&(s=!0,o=o.slice(0,h-2),n[o]||(n[o]=[])),a=i[1]?R(i[1]):""),s?n[o].push(a):n[o]=a}return n},recognize:function(e){var t,n,r,a,i=[this.rootState],o={},h=!1;if(a=e.indexOf("?"),-1!==a){var s=e.substr(a+1,e.length);e=e.substr(0,a),o=this.parseQueryString(s)}for(e=decodeURI(e),"/"!==e.charAt(0)&&(e="/"+e),t=e.length,t>1&&"/"===e.charAt(t-1)&&(e=e.substr(0,t-1),h=!0),n=0,r=e.length;r>n&&(i=y(i,e.charAt(n)),i.length);n++);var u=[];for(n=0,r=i.length;r>n;n++)i[n].handlers&&u.push(i[n]);i=v(u);var c=u[0];return c&&c.handlers?(h&&"(.+)$"===c.regex.source.slice(-5)&&(e+="/"),w(c,e,o)):void 0}},L.prototype.map=x,L.VERSION="0.1.9";var P=L;n(4).amd?(r=function(){return P}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))):"undefined"!=typeof e&&e.exports?e.exports=P:"undefined"!=typeof this&&(this.RouteRecognizer=P)}).call(this)}).call(t,n(5)(e))},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}}])});