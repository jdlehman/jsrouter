var jsrouter=function(n){"use strict";function t(n,t){this.navigate("/")}function e(){return{}}function r(n){return"/"===n.charAt(0)}function a(n){return r(n)?n:"/"+n}function i(n){return"/"!==n.slice(-1)?n+"/":n}function o(n){return i(a(n.split("#")[1]||"/"))}function u(){}function h(n){return"undefined"!=typeof n&&!n}function c(n){return n.split("?")[0]}function s(n,t){var e={};return Object.keys(n).forEach(function(t){e[t]=c(n[t])}),e}function l(n,t,e,r){var a=t.recognize(e.path);if(!a)return null;for(var i=[],o=m({},s(e),{queryParams:a.queryParams}),u=0;u<a.length;u++){var h=a[u],c=h.params,l=n[h.handler],f=l&&l[r],d=m({},o,{params:c});i.push({handler:f,args:d})}return i}function f(n){n.forEach(function(n){var t=n.handler,e=n.args;"function"==typeof t&&t(e)})}function d(n,t){if(!n)return t;var e=n[0].args,r=n.reduce(function(n,t){var e=t.args.params;return m({},n,e)},{});return m({},e,{params:r})}function v(n){if(void 0!==navigator.msMaxTouchPoints){P=window.location.href;var t=setInterval(function(){try{if(S=window.location.href,P===S)return;n.call(window,{type:"hashchange",newURL:S,oldURL:P}),P=S}catch(n){clearInterval(t)}},100)}else window.addEventListener&&window.addEventListener("hashchange",n,!1)}function p(n){var t=o(n.oldURL),e=o(n.newURL),r={lastPath:t,path:e},a=l(this.handlers,this.recognizer,r,"enter"),i=d(a,r);a?f(a):this.unrecognizedRouteHandler(t,e),this.handleAfterChange(i)}function g(n){var t=o(n.target.URL),e=l(this.handlers,this.recognizer,{path:t},"enter");e&&f(e);var r=d(e,{path:t});this.handleLoad(n,r)}function w(n){var t=this.currentPath(),e=l(this.handlers,this.recognizer,{path:t}),r=d(e,{path:t});this.handlePopState(n,r)}function y(){window.addEventListener("load",g.bind(this)),window.addEventListener("popstate",w.bind(this)),v(p.bind(this))}n="default"in n?n.default:n;var b=(function(){function n(n){this.value=n}function t(t){function e(n,t){return new Promise(function(e,a){var u={key:n,arg:t,resolve:e,reject:a,next:null};o?o=o.next=u:(i=o=u,r(n,t))})}function r(e,i){try{var o=t[e](i),u=o.value;u instanceof n?Promise.resolve(u.value).then(function(n){r("next",n)},function(n){r("throw",n)}):a(o.done?"return":"normal",o.value)}catch(n){a("throw",n)}}function a(n,t){switch(n){case"return":i.resolve({value:t,done:!0});break;case"throw":i.reject(t);break;default:i.resolve({value:t,done:!1})}i=i.next,i?r(i.key,i.arg):o=null}var i,o;this._invoke=e,"function"!=typeof t.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(n){return this._invoke("next",n)},t.prototype.throw=function(n){return this._invoke("throw",n)},t.prototype.return=function(n){return this._invoke("return",n)},{wrap:function(n){return function(){return new t(n.apply(this,arguments))}},await:function(t){return new n(t)}}}(),function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}),k=function(){function n(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}return function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}}(),m=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n},P=void 0,S=void 0,L=function(){function a(r){b(this,a);var i={unrecognizedRouteHandler:t.bind(this),handleLoad:u,handlePopState:u,navigateState:e,handleBeforeChange:u,handleAfterChange:u,persistState:function(){var n;return(n=window.history).replaceState.apply(n,arguments)}},o=m({},i,r),h=o.unrecognizedRouteHandler,c=o.handleLoad,s=o.handlePopState,l=o.navigateState,f=o.handleBeforeChange,d=o.handleAfterChange,v=o.persistState;this.recognizer=new n,this.handlers={},this.unrecognizedRouteHandler=h,this.handleLoad=c,this.handlePopState=s,this.navigateState=l,this.handleBeforeChange=f,this.handleAfterChange=d,this.persistState=v,y.call(this)}return k(a,[{key:"addHandler",value:function(n,t){this.handlers[n]=t}},{key:"map",value:function(n){this.recognizer.map(n)}},{key:"currentPath",value:function(){return o(window.location.hash.split("?")[0])}},{key:"navigate",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.navigateState(),e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r(n)?"#"+n:"#"+this.currentPath()+n,i=window.location.hash,u={path:o(i),nextPath:o(a)},c=l(this.handlers,this.recognizer,u,"leave"),s=d(c,u),v=this.handleBeforeChange(s);h(v)||(c&&f(c),window.location.hash=a,this.persistState(t,"",a),e.trigger&&i===a&&p.call(this,{type:"hashchange",oldURL:a,newURL:a}))}},{key:"back",value:function(){window.history.back()}},{key:"forward",value:function(){window.history.forward()}},{key:"pop",value:function(){var n=this.currentPath().match(/(.*)(?:\/.+\/?)/);n&&this.navigate(n[1]+"/")}}]),a}();return L}(Recognizer);
