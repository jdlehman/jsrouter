var jsrouter=function(){"use strict";var t=Object.create;function e(){var e=t(null);return e.__=void 0,delete e.__,e}var r=function(t,e,r){this.path=t,this.matcher=e,this.delegate=r};r.prototype.to=function(t,e){var r=this.delegate;if(r&&r.willAddRoute&&(t=r.willAddRoute(this.matcher.target,t)),this.matcher.add(this.path,t),e){if(0===e.length)throw new Error("You must have an argument in the function passed to `to`");this.matcher.addChild(this.path,t,e,this.delegate)}};var n=function(t){this.routes=e(),this.children=e(),this.target=t};n.prototype.add=function(t,e){this.routes[t]=e},n.prototype.addChild=function(t,e,r,o){var i=new n(e);this.children[t]=i;var h=a(t,i,o);o&&o.contextEntered&&o.contextEntered(e,h),r(h)};function a(t,e,n){return function(o,i){var h=t+o;if(!i)return new r(h,e,n);i(a(h,e,n))}}function o(t,e,r){for(var n=0,a=0;a<t.length;a++)n+=t[a].path.length;var o={path:e=e.substr(n),handler:r};t.push(o)}function i(t,e,r,n){for(var a=e.routes,h=Object.keys(a),s=0;s<h.length;s++){var u=h[s],c=t.slice();o(c,u,a[u]);var l=e.children[u];l?i(c,l,r,n):r.call(n,c)}}function h(t){return t.split("/").map(u).join("/")}var s=/%|\//g;function u(t){return t.length<3||-1===t.indexOf("%")?t:decodeURIComponent(t).replace(s,encodeURIComponent)}var c=/%(?:2(?:4|6|B|C)|3(?:B|D|A)|40)/g;function l(t){return encodeURIComponent(t).replace(c,decodeURIComponent)}var d=/(\/|\.|\*|\+|\?|\||\(|\)|\[|\]|\{|\}|\\)/g,f=Array.isArray,p=Object.prototype.hasOwnProperty;function v(t,e){if("object"!=typeof t||null===t)throw new Error("You must pass an object as the second argument to `generate`.");if(!p.call(t,e))throw new Error("You must provide param `"+e+"` to `generate`.");var r=t[e],n="string"==typeof r?r:""+r;if(0===n.length)throw new Error("You must provide a param `"+e+"`.");return n}var g=[];g[0]=function(t,e){for(var r=e,n=t.value,a=0;a<n.length;a++){var o=n.charCodeAt(a);r=r.put(o,!1,!1)}return r},g[1]=function(t,e){return e.put(47,!0,!0)},g[2]=function(t,e){return e.put(-1,!1,!0)},g[4]=function(t,e){return e};var y=[];y[0]=function(t){return t.value.replace(d,"\\$1")},y[1]=function(){return"([^/]+)"},y[2]=function(){return"(.+)"},y[4]=function(){return""};var m=[];m[0]=function(t){return t.value},m[1]=function(t,e){var r=v(e,t.value);return _.ENCODE_AND_DECODE_PATH_SEGMENTS?l(r):r},m[2]=function(t,e){return v(e,t.value)},m[4]=function(){return""};var w=Object.freeze({}),E=Object.freeze([]);function S(t,e,r){e.length>0&&47===e.charCodeAt(0)&&(e=e.substr(1));for(var n=e.split("/"),a=void 0,o=void 0,i=0;i<n.length;i++){var h=n[i],s=0,c=0;12&(s=2<<(c=""===h?4:58===h.charCodeAt(0)?1:42===h.charCodeAt(0)?2:0))&&(h=h.slice(1),(a=a||[]).push(h),(o=o||[]).push(0!=(4&s))),14&s&&r[c]++,t.push({type:c,value:u(h)})}return{names:a||E,shouldDecodes:o||E}}function C(t,e,r){return t.char===e&&t.negate===r}var A=function(t,e,r,n,a){this.states=t,this.id=e,this.char=r,this.negate=n,this.nextStates=a?e:null,this.pattern="",this._regex=void 0,this.handlers=void 0,this.types=void 0};A.prototype.regex=function(){return this._regex||(this._regex=new RegExp(this.pattern)),this._regex},A.prototype.get=function(t,e){var r=this.nextStates;if(null!==r)if(f(r))for(var n=0;n<r.length;n++){var a=this.states[r[n]];if(C(a,t,e))return a}else{var o=this.states[r];if(C(o,t,e))return o}},A.prototype.put=function(t,e,r){var n;if(n=this.get(t,e))return n;var a=this.states;return n=new A(a,a.length,t,e,r),a[a.length]=n,null==this.nextStates?this.nextStates=n.id:f(this.nextStates)?this.nextStates.push(n.id):this.nextStates=[this.nextStates,n.id],n},A.prototype.match=function(t){var e=this.nextStates;if(!e)return[];var r=[];if(f(e))for(var n=0;n<e.length;n++){var a=this.states[e[n]];b(a,t)&&r.push(a)}else{var o=this.states[e];b(o,t)&&r.push(o)}return r};function b(t,e){return t.negate?t.char!==e&&-1!==t.char:t.char===e||-1===t.char}function R(t,e){for(var r=[],n=0,a=t.length;n<a;n++){var o=t[n];r=r.concat(o.match(e))}return r}var P=function(t){this.length=0,this.queryParams=t||{}};P.prototype.splice=Array.prototype.splice,P.prototype.slice=Array.prototype.slice,P.prototype.push=Array.prototype.push;function O(t){t=t.replace(/\+/gm,"%20");var e;try{e=decodeURIComponent(t)}catch(t){e=""}return e}var _=function(){this.names=e();var t=[],r=new A(t,0,-1,!0,!1);t[0]=r,this.states=t,this.rootState=r};_.prototype.add=function(t,e){for(var r=this.rootState,n="^",a=[0,0,0],o=new Array(t.length),i=[],h=!0,s=0,u=0;u<t.length;u++){for(var c=t[u],l=S(i,c.path,a),d=l.names,f=l.shouldDecodes;s<i.length;s++){var p=i[s];4!==p.type&&(h=!1,r=r.put(47,!1,!1),n+="/",r=g[p.type](p,r),n+=y[p.type](p))}o[u]={handler:c.handler,names:d,shouldDecodes:f}}h&&(r=r.put(47,!1,!1),n+="/"),r.handlers=o,r.pattern=n+"$",r.types=a;var v;"object"==typeof e&&null!==e&&e.as&&(v=e.as),v&&(this.names[v]={segments:i,handlers:o})},_.prototype.handlersFor=function(t){var e=this.names[t];if(!e)throw new Error("There is no route named "+t);for(var r=new Array(e.handlers.length),n=0;n<e.handlers.length;n++){var a=e.handlers[n];r[n]=a}return r},_.prototype.hasRoute=function(t){return!!this.names[t]},_.prototype.generate=function(t,e){var r=this.names[t],n="";if(!r)throw new Error("There is no route named "+t);for(var a=r.segments,o=0;o<a.length;o++){var i=a[o];4!==i.type&&(n+="/",n+=m[i.type](i,e))}return"/"!==n.charAt(0)&&(n="/"+n),e&&e.queryParams&&(n+=this.generateQueryString(e.queryParams)),n},_.prototype.generateQueryString=function(t){var e=[],r=Object.keys(t);r.sort();for(var n=0;n<r.length;n++){var a=r[n],o=t[a];if(null!=o){var i=encodeURIComponent(a);if(f(o))for(var h=0;h<o.length;h++){var s=a+"[]="+encodeURIComponent(o[h]);e.push(s)}else i+="="+encodeURIComponent(o),e.push(i)}}return 0===e.length?"":"?"+e.join("&")},_.prototype.parseQueryString=function(t){for(var e=t.split("&"),r={},n=0;n<e.length;n++){var a=e[n].split("="),o=O(a[0]),i=o.length,h=!1,s=void 0;1===a.length?s="true":(i>2&&"[]"===o.slice(i-2)&&(h=!0,r[o=o.slice(0,i-2)]||(r[o]=[])),s=a[1]?O(a[1]):""),h?r[o].push(s):r[o]=s}return r},_.prototype.recognize=function(t){var e,r=[this.rootState],n={},a=!1,o=t.indexOf("#");-1!==o&&(t=t.substr(0,o));var i=t.indexOf("?");if(-1!==i){var s=t.substr(i+1,t.length);t=t.substr(0,i),n=this.parseQueryString(s)}"/"!==t.charAt(0)&&(t="/"+t);var u=t;_.ENCODE_AND_DECODE_PATH_SEGMENTS?t=h(t):(t=decodeURI(t),u=decodeURI(u));var c=t.length;c>1&&"/"===t.charAt(c-1)&&(t=t.substr(0,c-1),u=u.substr(0,u.length-1),a=!0);for(var l=0;l<t.length&&(r=R(r,t.charCodeAt(l))).length;l++);for(var d=[],f=0;f<r.length;f++)r[f].handlers&&d.push(r[f]);r=d.sort(function(t,e){var r=t.types||[0,0,0],n=r[0],a=r[1],o=r[2],i=e.types||[0,0,0],h=i[0],s=i[1],u=i[2];if(o!==u)return o-u;if(o){if(n!==h)return h-n;if(a!==s)return s-a}return a!==s?a-s:n!==h?h-n:0});var p=d[0];return p&&p.handlers&&(a&&p.pattern&&"(.+)$"===p.pattern.slice(-5)&&(u+="/"),e=function(t,e,r){var n=t.handlers,a=t.regex();if(!a||!n)throw new Error("state not initialized");var o=e.match(a),i=1,h=new P(r);h.length=n.length;for(var s=0;s<n.length;s++){var u=n[s],c=u.names,l=u.shouldDecodes,d=w,f=!1;if(c!==E&&l!==E)for(var p=0;p<c.length;p++){f=!0;var v=c[p],g=o&&o[i++];d===w&&(d={}),_.ENCODE_AND_DECODE_PATH_SEGMENTS&&l[p]?d[v]=g&&decodeURIComponent(g):d[v]=g}h[s]={handler:u.handler,params:d,isDynamic:f}}return h}(p,u,n)),e},_.VERSION="0.3.3",_.ENCODE_AND_DECODE_PATH_SEGMENTS=!0,_.Normalizer={normalizeSegment:u,normalizePath:h,encodePathSegment:l},_.prototype.map=function(t,e){var r=new n;t(a("",r,this.delegate)),i([],r,function(t){e?e(this,t):this.add(t)},this)};function x(){return{}}var D=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},z=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),U=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t};function j(t){return"/"===t.charAt(0)}function L(t){return r=t.split("#")[1]||"/","/"!==(e=j(r)?r:"/"+r).slice(-1)?e+"/":e;var e,r}function I(){}function N(t,e,r,n){var a=e.recognize(r.path);if(!a)return null;for(var o=[],i=U({},function(t,e){var r={};return Object.keys(t).forEach(function(e){r[e]=(n=t[e],n.split("?")[0]);var n}),r}(r),{queryParams:a.queryParams}),h=0;h<a.length;h++){var s=a[h],u=s.params,c=t[s.handler],l=c&&c[n],d=U({},i,{params:u});o.push({handler:l,args:d})}return o}function k(t){t.forEach(function(t){var e=t.handler,r=t.args;"function"==typeof e&&e(r)})}function T(t,e){if(!t)return e;var r=t[0].args,n=t.reduce(function(t,e){var r=e.args.params;return U({},t,r)},{});return U({},r,{params:n})}var H=void 0,B=void 0;function q(t){var e=L(t.oldURL),r=L(t.newURL),n={lastPath:e,path:r},a=N(this.handlers,this.recognizer,n,"enter"),o=T(a,n);a?k(a):this.unrecognizedRouteHandler(e,r),this.handleAfterChange(o)}function M(){window.addEventListener("load",function(t){var e=L(t.target.URL),r=N(this.handlers,this.recognizer,{path:e},"enter");r&&k(r);var n=T(r,{path:e});this.handleLoad(t,n)}.bind(this)),window.addEventListener("popstate",function(t){var e=this.currentPath(),r=T(N(this.handlers,this.recognizer,{path:e}),{path:e});this.handlePopState(t,r)}.bind(this)),function(t){if(void 0!==navigator.msMaxTouchPoints){H=window.location.href;var e=setInterval(function(){try{if(B=window.location.href,H===B)return;t.call(window,{type:"hashchange",newURL:B,oldURL:H}),H=B}catch(t){clearInterval(e)}},100)}else window.addEventListener&&window.addEventListener("hashchange",t,!1)}(q.bind(this))}return function(){function t(e){D(this,t);var r={unrecognizedRouteHandler:function(t,e){this.navigate("/")}.bind(this),handleLoad:I,handlePopState:I,navigateState:x,handleBeforeChange:I,handleAfterChange:I,persistState:function(){var t;return(t=window.history).replaceState.apply(t,arguments)}},n=U({},r,e),a=n.unrecognizedRouteHandler,o=n.handleLoad,i=n.handlePopState,h=n.navigateState,s=n.handleBeforeChange,u=n.handleAfterChange,c=n.persistState;this.recognizer=new _,this.handlers={},this.unrecognizedRouteHandler=a,this.handleLoad=o,this.handlePopState=i,this.navigateState=h,this.handleBeforeChange=s,this.handleAfterChange=u,this.persistState=c,M.call(this)}return z(t,[{key:"addHandler",value:function(t,e){this.handlers[t]=e}},{key:"map",value:function(t){this.recognizer.map(t)}},{key:"currentPath",value:function(){return L(window.location.hash.split("?")[0])}},{key:"navigate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.navigateState(),r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=j(t)?"#"+t:"#"+this.currentPath()+t,a=window.location.hash,o={path:L(a),nextPath:L(n)},i=N(this.handlers,this.recognizer,o,"leave"),h=T(i,o),s=this.handleBeforeChange(h);if(void 0===(u=s)||u){var u;i&&k(i),window.location.hash=n,this.persistState(e,"",n),r.trigger&&a===n&&q.call(this,{type:"hashchange",oldURL:n,newURL:n})}}},{key:"back",value:function(){window.history.back()}},{key:"forward",value:function(){window.history.forward()}},{key:"pop",value:function(){var t=this.currentPath().match(/(.*)(?:\/.+\/?)/);t&&this.navigate(t[1]+"/")}}]),t}()}();
